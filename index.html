<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BarneyTube Lite - Just Video Player</title>
<style>
  body {
    background: #121212;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 2rem;
    display: flex; flex-direction: column; align-items: center;
  }
  input[type="text"] {
    width: 300px;
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    border: none;
    outline: none;
    font-size: 1rem;
    margin-bottom: 1rem;
  }
  button {
    padding: 0.5rem 1.5rem;
    border-radius: 9999px;
    border: none;
    background: #bb86fc;
    color: #121212;
    font-weight: bold;
    cursor: pointer;
  }
  button:hover {
    background: #9a64d1;
  }
  .player {
    margin-top: 2rem;
    width: 90vw;
    max-width: 800px;
    aspect-ratio: 16 / 9;
    background: black;
    border-radius: 8px;
    overflow: hidden;
  }
  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
</style>
</head>
<body>
  <h1>BarneyTube Lite</h1>
  <input id="videoInput" type="text" placeholder="Paste YouTube or Piped video URL or ID" />
  <button id="playBtn">Play Video</button>

  <div id="player" class="player" style="display:none;"></div>

  <script>
    const videoInput = document.getElementById('videoInput');
    const playBtn = document.getElementById('playBtn');
    const player = document.getElementById('player');

    playBtn.addEventListener('click', () => {
      let val = videoInput.value.trim();
      if (!val) return alert('Enter a video URL or ID.');

      // Extract video ID from YouTube or Piped URL or raw ID
      let videoId = extractVideoId(val);
      if (!videoId) return alert('Invalid YouTube or Piped video URL or ID.');

      // Show Piped embed iframe (privacy friendly, no Google trackers)
      player.style.display = 'block';
      player.innerHTML = `
        <iframe 
          src="https://piped.kavin.rocks/embed/${videoId}" 
          allowfullscreen 
          allow="autoplay" 
          title="Video player"></iframe>`;
      player.scrollIntoView({ behavior: 'smooth' });
    });

    function extractVideoId(urlOrId) {
      // If input looks like pure ID (11 chars, YouTube style)
      if (/^[\w-]{11}$/.test(urlOrId)) return urlOrId;

      // Try to extract ID from YouTube URL
      let ytMatch = urlOrId.match(/[?&]v=([\w-]{11})/);
      if (ytMatch) return ytMatch[1];

      // Try short URL youtu.be/ID
      let shortMatch = urlOrId.match(/youtu\.be\/([\w-]{11})/);
      if (shortMatch) return shortMatch[1];

      // Try Piped URL piped.kavin.rocks/watch/ID
      let pipedMatch = urlOrId.match(/piped\.kavin\.rocks\/watch\/([\w-]{11})/);
      if (pipedMatch) return pipedMatch[1];

      return null;
    }
  </script>
</body>
</html>
